-- MySQL Script generated by MySQL Workbench
-- 11/08/18 09:31:24
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema dbweb2
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema dbweb2
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `dbweb2` ;
USE `dbweb2` ;

-- -----------------------------------------------------
-- Table `dbweb2`.`USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `dbweb2`.`USUARIO` (
  `IDUSUARIO` INT NOT NULL AUTO_INCREMENT,
  `NOME` VARCHAR(25) NOT NULL,
  `SOBRENOME` VARCHAR(50) NOT NULL,
  `ENDERECO` VARCHAR(255) NOT NULL,
  `SENHA` VARCHAR(12) NOT NULL,
  `LOGIN` VARCHAR(20) NOT NULL,
  `DATANASCIMENTO` VARCHAR(12) NOT NULL,
  `ISADM` TINYINT NOT NULL DEFAULT 0,
  PRIMARY KEY (`IDUSUARIO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dbweb2`.`CARTAODECREDITO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `dbweb2`.`CARTAODECREDITO` (
  `NUMEROCARTAO` VARCHAR(19) NOT NULL,
  `DATAVENCIMENTO` VARCHAR(12) NOT NULL,
  `USUARIO_IDUSUARIO` INT NOT NULL,
  PRIMARY KEY (`NUMEROCARTAO`),
  INDEX (`USUARIO_IDUSUARIO` ASC),
  CONSTRAINT ``
    FOREIGN KEY (`USUARIO_IDUSUARIO`)
    REFERENCES `dbweb2`.`USUARIO` (`IDUSUARIO`));


-- -----------------------------------------------------
-- Table `dbweb2`.`voo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `dbweb2`.`voo` (
  `idvoo` INT NOT NULL AUTO_INCREMENT,
  `ida` DATETIME NOT NULL,
  `origem` VARCHAR(100) NOT NULL,
  `destino` VARCHAR(100) NOT NULL,
  `confirmacao` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`idvoo`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dbweb2`.`compraVoo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `dbweb2`.`compraVoo` (
  `idcompraVoo` INT NOT NULL AUTO_INCREMENT,
  `USUARIO_IDUSUARIO` INT NOT NULL,
  `voo_idvoo` INT NOT NULL,
  `preco` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idcompraVoo`),
  INDEX `fk_compraVoo_USUARIO1_idx` (`USUARIO_IDUSUARIO` ASC),
  INDEX `fk_compraVoo_voo1_idx` (`voo_idvoo` ASC),
  CONSTRAINT `fk_compraVoo_USUARIO1`
    FOREIGN KEY (`USUARIO_IDUSUARIO`)
    REFERENCES `dbweb2`.`USUARIO` (`IDUSUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_compraVoo_voo1`
    FOREIGN KEY (`voo_idvoo`)
    REFERENCES `dbweb2`.`voo` (`idvoo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `dbweb2`.`assento`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `dbweb2`.`assento` (
  `idassento` INT NOT NULL,
  `ocupado` TINYINT(1) NOT NULL DEFAULT 0,
  `voo_idvoo` INT NOT NULL,
  `USUARIO_IDUSUARIO` INT NOT NULL,
  PRIMARY KEY (`idassento`, `USUARIO_IDUSUARIO`),
  INDEX `fk_assento_voo1_idx` (`voo_idvoo` ASC),
  INDEX `fk_assento_USUARIO1_idx` (`USUARIO_IDUSUARIO` ASC),
  CONSTRAINT `fk_assento_voo1`
    FOREIGN KEY (`voo_idvoo`)
    REFERENCES `dbweb2`.`voo` (`idvoo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_assento_USUARIO1`
    FOREIGN KEY (`USUARIO_IDUSUARIO`)
    REFERENCES `dbweb2`.`USUARIO` (`IDUSUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
